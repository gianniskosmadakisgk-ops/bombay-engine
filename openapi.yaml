openapi: 3.1.1
info:
  title: Bombay Engine API
  version: "1.0.0"
  description: >
    Internal API for Agent Bombay – Thursday analysis (full v3 model),
    Friday shortlist (Kelly), and Tuesday recap.

servers:
  - url: https://bombay-engine.onrender.com

paths:
  /healthcheck:
    get:
      operationId: healthcheck
      summary: Healthcheck for Bombay Engine
      responses:
        "200":
          description: Engine is alive
          content:
            application/json:
              schema:
                type: object

  # --------------------------------------------------
  # THURSDAY – FULL ENGINE v3
  # --------------------------------------------------
  /thursday-analysis-v3:
    get:
      operationId: thursday_analysis_v3
      summary: Run full Thursday analysis (v3 model)
      description: >
        Runs the Thursday engine (thursday_engine_full_v3.py) and returns
        the JSON report with fixtures, model probabilities and scores.
      responses:
        "200":
          description: Thursday analysis result
          content:
            application/json:
              schema:
                type: object

  # Alias for compatibility
  /thursday-analysis:
    get:
      operationId: thursday_analysis_legacy
      summary: Run Thursday analysis (alias to v3)
      responses:
        "200":
          description: Thursday analysis result (alias)
          content:
            application/json:
              schema:
                type: object

  # --------------------------------------------------
  # FRIDAY – SHORTLIST (Kelly)
  # --------------------------------------------------
  /friday-shortlist:
    get:
      operationId: friday_shortlist
      summary: Run Friday shortlist engine
      description: >
        Runs the Friday shortlist script (friday_shortlist_v2.py),
        loading the latest Thursday report and applying value + Kelly filters.
      responses:
        "200":
          description: Friday shortlist with recommended bets
          content:
            application/json:
              schema:
                type: object

  # --------------------------------------------------
  # TUESDAY – WEEKLY RECAP
  # --------------------------------------------------
  /tuesday-recap:
    get:
      operationId: tuesday_recap
      summary: Run Tuesday recap engine
      description: >
        Runs the Tuesday recap script (tuesday_recap_v2.py) and returns
        weekly performance stats (winrate, ROI, drawdowns, etc.).
      responses:
        "200":
          description: Tuesday recap report
          content:
            application/json:
              schema:
                type: object
